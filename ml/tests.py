from django.test import TestCase
from ml.mentor_match_classifier.mentor_match import MentorMatchClassifier
import inspect
from ml.registry import MLRegistry

class MLTests(TestCase):
    def test_rf_algorithm(self):
        input_data = {"user":{"0":"student1","1":"mentor1","2":"mentor0","3":"mentor2","4":"mentor3","5":"mentor4","6":"mentor5","7":"mentor6","8":"mentor7","9":"mentor8","10":"mentor9","11":"student0","12":"student2","13":"student3","14":"student4","15":"student5","16":"student6","17":"student7","18":"student8","19":"student9"},"Are you a Mentor or Student?":{"0":"student","1":"mentor","2":"mentor","3":"mentor","4":"mentor","5":"mentor","6":"mentor","7":"mentor","8":"mentor","9":"mentor","10":"mentor","11":"student","12":"student","13":"student","14":"student","15":"student","16":"student","17":"student","18":"student","19":"student"},"Mentor: What industries have you worked in? Student: What industries are you interested in?":{"0":"['dating'; 'sports']","1":"['finance'; 'gaming-government-and-politics'; 'media-and-entertainment'; 'real-estate']","2":"['dating'; 'payment'; 'telecommunications'; 'wearables']","3":"['diy'; 'e-commercedelivery'; 'education']","4":"['nonprofit']","5":"['enterprise'; 'fashion-beauty'; 'nonprofit'; 'payment']","6":"['real-estate'; 'retail']","7":"['dating']","8":"['wearables']","9":"['finance'; 'payment'; 'social-network']","10":"['telecommunications'; 'transportation'; 'travel']","11":"['enterprise'; 'finance'; 'payment'; 'sports']","12":"['education'; 'gaming-government-and-politics'; 'health-and-wellness'; 'nonprofit'; 'technology']","13":"['dating'; 'fashion-beauty'; 'health-and-wellness'; 'marketing']","14":"['e-commercedelivery'; 'messaging'; 'music'; 'retail'; 'sports'; 'transportation']","15":"['messaging'; 'social-network'; 'technology'; 'telecommunications']","16":"['food'; 'health-and-wellness'; 'media-and-entertainment'; 'music'; 'retail'; 'social-network']","17":"['telecommunications'; 'transportation'; 'travel'; 'venture-capital'; 'wearables']","18":"['real-estate'; 'retail'; 'social-network'; 'sports']","19":"['gaming-government-and-politics'; 'health-and-wellness'; 'interior-design'; 'venture-capital'; 'wearables']"},"Mentor: Why do you want to be a mentor? Student: Why do you want a mentor?":{"0":"['enhance-cv']","1":"['enhance-cv'; 'reinforce-industry-knowledge']","2":"['learn-to-deal-with-personal-or-academic-issues'; 'improving-communication-skills']","3":"['enhance-cv']","4":"['develop-leadership-qualities'; 'enhance-cv'; 'reinforce-industry-knowledge'; 'build-your-network']","5":"['learn-to-deal-with-personal-or-academic-issues'; 'improving-communication-skills'; 'build-your-network']","6":"['develop-leadership-qualities'; 'build-your-network']","7":"['learn-to-deal-with-personal-or-academic-issues']","8":"['build-your-network']","9":"['learn-to-deal-with-personal-or-academic-issues'; 'develop-leadership-qualities']","10":"['improving-communication-skills'; 'reinforce-industry-knowledge']","11":"['reinforce-industry-knowledge'; 'build-your-network']","12":"['learn-to-deal-with-personal-or-academic-issues'; 'develop-leadership-qualities']","13":"['develop-leadership-qualities'; 'enhance-cv']","14":"['improving-communication-skills'; 'reinforce-industry-knowledge']","15":"['learn-to-deal-with-personal-or-academic-issues'; 'improving-communication-skills'; 'enhance-cv'; 'reinforce-industry-knowledge']","16":"['enhance-cv'; 'reinforce-industry-knowledge']","17":"['reinforce-industry-knowledge'; 'build-your-network']","18":"['improving-communication-skills'; 'develop-leadership-qualities'; 'enhance-cv']","19":"['learn-to-deal-with-personal-or-academic-issues'; 'improving-communication-skills'; 'build-your-network']"},"Mentor: What size companies have you worked for\/are currently working at? Student: What size companies are you interested in working for?":{"0":"['1000-5000-employees']","1":"['1000-5000-employees']","2":"['1000-5000-employees'; '5000-employees']","3":"['less-than-100-employees']","4":"['100-1000-employees']","5":"['less-than-100-employees'; '100-1000-employees']","6":"['100-1000-employees'; '5000-employees']","7":"['less-than-100-employees']","8":"['5000-employees']","9":"['less-than-100-employees']","10":"['5000-employees']","11":"['1000-5000-employees'; '5000-employees']","12":"['less-than-100-employees']","13":"['100-1000-employees'; '1000-5000-employees']","14":"['less-than-100-employees'; '100-1000-employees']","15":"['less-than-100-employees'; '5000-employees']","16":"['100-1000-employees'; '1000-5000-employees']","17":"['5000-employees']","18":"['less-than-100-employees'; '100-1000-employees'; '1000-5000-employees']","19":"['less-than-100-employees'; '5000-employees']"},"What is your ethnicity?":{"0":"['hispanic-or-latinx']","1":"['black-or-african-american']","2":"['other']","3":"['caucasian']","4":"['hispanic-or-latinx']","5":"['native-american-or-american-indian']","6":"['hispanic-or-latinx'; 'black-or-african-american']","7":"['caucasian']","8":"['hispanic-or-latinx']","9":"['black-or-african-american']","10":"['asian']","11":"['caucasian']","12":"['black-or-african-american']","13":"['hispanic-or-latinx']","14":"['caucasian']","15":"['black-or-african-american']","16":"['native-american-or-american-indian']","17":"['asian'; 'other']","18":"['native-american-or-american-indian'; 'other']","19":"['hispanic-or-latinx'; 'asian']"},"Mentor: Do you have any experience\/knowledge in the following areas? Student: What learning track are you pursuing?":{"0":"['it'; 'data-analytics']","1":"['it-help-desk-support'; 'cyber-security']","2":"['project-management'; 'it-help-desk-support']","3":"['cyber-security']","4":"['project-management'; 'data-analytics']","5":"['it'; 'cyber-security']","6":"['it-help-desk-support'; 'quality-assurance']","7":"['project-management']","8":"['data-analytics']","9":"['project-management'; 'it']","10":"['quality-assurance'; 'cyber-security'; 'data-analytics']","11":"['project-management'; 'quality-assurance']","12":"['data-analytics']","13":"['project-management']","14":"['it']","15":"['cyber-security']","16":"['quality-assurance']","17":"['it-help-desk-support']","18":"['project-management']","19":"['data-analytics']"},"Mentor: What are some skills you are experienced in? Student: What are some skills you would like to work on?":{"0":"['professional-development'; 'interviewing-skills'; 'networking']","1":"['public-speaking'; 'time-management'; 'technology'; 'communication'; 'project-management']","2":"['leadership'; 'public-speaking'; 'technical-skills']","3":"['technical-skills']","4":"['professional-development'; 'industry-updates']","5":"['time-management'; 'research']","6":"['networking'; 'public-speaking'; 'time-management'; 'technology']","7":"['professional-development']","8":"['interviewing-skills'; 'industry-updates']","9":"['public-speaking'; 'communication']","10":"['public-speaking'; 'research'; 'project-management']","11":"['networking'; 'leadership'; 'project-management']","12":"['networking'; 'leadership'; 'communication']","13":"['public-speaking'; 'research'; 'communication'; 'project-management']","14":"['professional-development'; 'networking'; 'public-speaking'; 'technical-skills'; 'technology']","15":"['time-management'; 'research'; 'technology'; 'industry-updates']","16":"['professional-development'; 'technical-skills'; 'industry-updates']","17":"['communication'; 'project-management'; 'industry-updates']","18":"['technical-skills'; 'time-management'; 'research']","19":"['networking'; 'leadership'; 'public-speaking'; 'communication']"},"Mentor: What county is most convenient for you to meet your mentee? Student: What county is most convenient for you to meet your mentor?":{"0":"sonoma","1":"napa","2":"alameda","3":"napa","4":"marin","5":"santa-clara","6":"alameda","7":"contra-costa","8":"san-francisco","9":"san-mateo","10":"sonoma","11":"sonoma","12":"napa","13":"solano","14":"contra-costa","15":"alameda","16":"santa-clara","17":"san-mateo","18":"san-francisco","19":"marin"},"user_id":{"0":2,"1":3,"2":12,"3":4,"4":5,"5":6,"6":7,"7":8,"8":9,"9":10,"10":11,"11":21,"12":13,"13":14,"14":15,"15":16,"16":17,"17":18,"18":19,"19":20}}
        mentor_match_alg = MentorMatchClassifier()
        response = mentor_match_alg.compute_prediciton(input_data)
        self.assertEqual('OK', response['status'])
        self.assertTrue('matches' in response)